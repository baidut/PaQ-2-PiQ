
    
      <!DOCTYPE html>
<html class="full-height" lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PaQ-2-PiQ</title>
    <meta name="description" content="Material design app landing page template built by TemplateFlip.com"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">


    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="styles/column.css" rel="stylesheet">
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous"> -->

    <!-- <link href="css/reset-this.css" rel="stylesheet"> -->
    <link href="css/mdb.min.css" rel="stylesheet">
    <!-- <link href="styles/main.css" rel="stylesheet"> -->

    <!-- <link href="styles/photo.css" rel="stylesheet"> -->
    <!-- <link href="styles/social_bar.css" rel="stylesheet"> -->

    <!-- include jQuery library -->
    <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="js/popper.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/mdb.min.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-STXPXN06N9"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-STXPXN06N9');
    </script>

    <script>
    const TOP_MARGIN = 25;
    const event = new Event('update_qmap');
    function update_qmap(){
      document.dispatchEvent(event);
    }
    function on_update_qmap(f) {
      document.addEventListener('update_qmap', function (e) { /* ... */f(); }, false);
      // elem.addEventListener('build', function (e) { /* ... */ }, false);
    }
    function do_stretch() {
      return document.querySelector('#check_contrast_stretch').checked;
    }
    // HTML5
    var width;
    var height;
    // https://stackoverflow.com/questions/11381673/detecting-a-mobile-browser
    </script>
  </head>
  <body id="top">
    <header>
      <!-- Navbar-->
      <nav class="navbar navbar-expand-lg special-color-dark navbar-dark fixed-top scrolling-navbar" id="navbar">
        <div class="container"><a class="navbar-brand" href="#"><strong>PaQ-2-PiQ</strong></a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
          <div class="collapse navbar-collapse" id="navbarContent">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item"><a class="nav-link active" href="#abstract">ABOUT</a></li>
              <!-- <li class="nav-item"><a class="nav-link active" href="#applications">APPLICATIONS</a></li>
              <li class="nav-item"><a class="nav-link active" href="#online-demo">DEMO</a></li> -->
              <li class="nav-item"><a class="nav-link active" href="#links">LINKS</a></li>
              <!-- TODO: media/video -->
              <!--  -->
              <!-- <li class="nav-item"><a class="nav-link active" href="#features">Features</a></li> -->
              <!-- <li class="nav-item"><a class="nav-link active" href="#screenshots">Screenshots</a></li>
              <li class="nav-item"><a class="nav-link" href="#pricing">Pricing</a></li> -->
              <!-- <li class="nav-item"><a class="nav-link" href="#team">Team</a></li>
              <li class="nav-item"><a class="nav-link" href="#client">Client</a></li>
              <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li> -->
            </ul><a class="btn btn-default btn-rounded my-0" href="#download-zone">Download</a>
          </div>
        </div>
      </nav>

<section class="py-5 special-color-dark text-white" id="about">
  <div class="container">
    <div class="wow fadeIn">
      <h2 class="h1 h1-responsive text-center my-5">From Patches to Pictures (PaQ-2-PiQ): <br/>Mapping the Perceptual Space of Picture Quality</h2>
      <p class="lead blue-grey-text text-center w-responsive mx-auto mb-5">
        <div align = "center">
          <div class="authorname" style="font-size:large;line-adjust:0">
            Zhenqiang Ying<sup>1*</sup>,
Haoran Niu<sup>1*</sup>,
Praful Gupta<sup>1</sup>,
Dhruv Mahajan<sup>2</sup>,
Deepti Ghadiyaram<sup>2+</sup>,
Alan Bovik<sup>1+</sup>,
          </div>
          <div class="authoraddress" style="line-adjust:0">
            
          <div class="authoremail email" style="line-adjust:0">
            {zqying, haoranniu, praful gupta}@utexas.edu, {dhruvm, deeptigp}@fb.com, bovik@ece.utexas.edu
          </div>

          <hr>
            <sup>*+</sup>Equal contribution
            <br>
            <sup>1</sup> University of Texas at Austin
            <sup>2</sup> Facebook AI
          <br/>
          <!-- Funding statement: this project is funded by Facebook AI. -->
          This project was supported and funded by Facebook AI.
          <br/>
            <a href='http://cvpr2020.thecvf.com/' ><img src='https://img.shields.io/badge/CVPR-2020-blue.svg' /> </a>
        </div>



        <div class="wow zoomIn text-center">

            <!-- <p class="h4 h4-responsive pt-5 pb-2 text-center"> -->
            <!-- <br/>
            <a href="https://github.com/baidut/PaQ-2-PiQ" class="btn btn-secondary">
            <i class="fa fa-github "></i>
             Souce code available
             </a>
             <br/><br/> -->
          <!-- </p> -->
        </div>
    </p>
    </div>
</section>


<!-- <section class="py-5 grey lighten-4" id="offline-demo">
  <div class="container">
    <div class="wow fadeInUp">
      <h2 class="h1 h1-responsive text-center my-5">Spread the news</h2>
      <p class="lead blue-grey-text text-center w-responsive mx-auto mb-5">

      </p>
    </div>

    <div class="icon-bar" style="text-align: center">
      <a href="https://www.facebook.com/" class="facebook"><i class="social fa fa-facebook"></i></a>
      <a href="https://twitter.com/" class="twitter"><i class="social fa fa-twitter"></i></a>
      <a href="#" class="google"><i class="social fa fa-google"></i></a>
      <a href="#" class="linkedin"><i class="social fa fa-linkedin"></i></a>
      <a href="#" class="youtube"><i class="social fa fa-youtube"></i></a>
    </div>

    </div>
</section> -->
    
      <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="js/include_once.js"></script>
<script>
function toggle_heatmap() {
  $(this).attr('src', $(this).attr('src').replace("_raw.jpg", "_map.jpg"));
}
function toggle_image() {
  $(this).attr('src', $(this).attr('src').replace("_map.jpg", "_raw.jpg"));
}
function show_heatmap(){
  $('#heatmap').show();
  $('#imtest').fadeTo(500, 0.2)
}
function hide_heatmap(){
  $('#heatmap').hide();
  $('#imtest').fadeTo(500, 1)
}
$(document).ready(function(){
  // $("#imgUploaded").hover(hide_image, show_image);
  // mobile user
  // $('#image-with-heatmap').hover(hide_heatmap, show_heatmap);
  // $('#image-with-heatmap').addClass("column");
  // $('.advancedcfg').hide();
  if( isMobile.any() ) {
    // mobile user
    $('.hovertoggle').bind('touchstart', toggle_heatmap).bind('touchend', toggle_image)
  }
  else {
    $('.hovertoggle').hover(toggle_heatmap, toggle_image);
  }
})
</script>
<section class="py-5 white" id="abstract">
  <div class="container">

    <div class="alert alert-warning alert-dismissible fade show" role="alert">
      <strong></strong>
      For video quality assesment, check out <a href="https://baidut.github.io/PatchVQ/" target="_blank">PatchVQ.</a>
    </div>


    <div class="wow fadeInUp">
      <h2 class="h1 h1-responsive text-center my-5">ABSTRACT</h2>
      <p class="lead blue-grey-text text-center w-responsive mx-auto mb-5">
        <!-- Picture Quality Map Prediction - Generated by RoIPoolModel w/ 32x32 partition -->
      </p>
      Blind or no-reference (NR) perceptual picture quality prediction is a difficult, unsolved problem of great consequence to the social and streaming media industries that impacts billions of viewers daily. Unfortunately, popular NR prediction models perform poorly on real-world distorted pictures. To advance progress on this problem, we introduce the largest (by far) subjective picture quality database, containing about 40000 real-world distorted pictures and 120000 patches, on which we collected about 4M human judgments of picture quality. Using these picture and patch quality labels, we built deep region-based architectures that learn to produce state-of-the-art global picture quality predictions as well as useful local picture quality maps. Our innovations include picture quality prediction architectures that produce global-to-local inferences as well as local-to-global inferences (via feedback).
      <br/>
      <br/>
      <br/>
    </div>

<!-- Photo Grid -->
<div class="row">
  <div class="doublecolumn">

  </div>
  <div class="doublecolumn">

  </div>
</div>

<div class="alert alert-warning alert-dismissible fade show" role="alert">
  <strong>A first of its kind image quality map predictor:</strong>
  <!-- <br/> -->
  Hover over an image & see its predicted spatial quality map.
</div>


<div class="row">
  <div class="column wow fadeInLeft">
    <img class="hovertoggle" src="demo/motion0022_raw.jpg" style="width:100%">
    <img class="hovertoggle" src="demo/motion0072_raw.jpg" style="width:100%">
    <!-- <img class="hovertoggle" src="demo/4462477090_raw.jpg" style="width:100%"> -->
    <!-- <img class="hovertoggle" src="demo/56_raw.jpg" style="width:100%"> -->

    <br>
    <br>
    <br>
    <br>
    <br>
    <img src="demo/magma.png" style="width:100%">
  </div>
  <div class="column wow fadeInRight">
    <img class="hovertoggle" src="demo/out_of_focus0385_raw.jpg" style="width:100%">
    <img class="hovertoggle" src="demo/out_of_focus0161_raw.jpg" style="width:100%">
    <img class="hovertoggle" src="demo/out_of_focus0083_raw.jpg" style="width:100%">
  </div>
  <div class="column wow fadeInLeft">
    <img class="hovertoggle" src="demo/2017266_raw.jpg" style="width:100%">
<!--     <img class="hovertoggle" src="demo/4582906874_raw.jpg" style="width:100%">
    <img class="hovertoggle" src="demo/6596306_raw.jpg" style="width:100%">
    <img class="hovertoggle" src="demo/4841257153_raw.jpg" style="width:100%"> -->
    <!-- <img class="hovertoggle" src="demo/4491574274_raw.jpg" style="width:100%"> -->
    <!-- <img class="hovertoggle" src="demo/6537150655_raw.jpg" style="width:100%"> -->
    <!-- <img class="hovertoggle" src="demo/7384140824_raw.jpg" style="width:100%"> -->
    <!-- <img class="hovertoggle" src="demo/5005558786_raw.jpg" style="width:100%"> -->
    <!-- <img class="hovertoggle" src="demo/299519765_raw.jpg" style="width:100%"> -->
    <img class="hovertoggle" src="demo/motion0160_raw.jpg" style="width:100%">
    <img class="hovertoggle" src="demo/motion0089_raw.jpg" style="width:100%">
  </div>

  <div class="column wow fadeInRight">

    <!-- <img class="hovertoggle" src="demo/4904294830_raw.jpg" style="width:100%"> -->

    <img class="hovertoggle" src="demo/6862937532_raw.jpg" style="width:100%">
    <img class="hovertoggle" src="demo/out_of_focus0470_raw.jpg" style="width:100%">


  </div>
</div>
</section>
    
      <section class="py-5 text-white" style="background: black;" id="applications">
  <div class="container">
    <div class="wow fadeInUp">
      <h2 class="h1 h1-responsive text-center my-5">APPLICATIONS</h2>
      <p class="lead blue-grey-text text-center w-responsive mx-auto mb-5">
        Apply on videos in a frame-by-frame manner
      </p>


      <!--Carousel Wrapper-->
  <div id="video-carousel-example2" class="carousel slide carousel-fade" data-ride="carousel">
    <!--Indicators-->
    <ol class="carousel-indicators">
      <li data-target="#video-carousel-example2" data-slide-to="0" class="active"></li>
      <li data-target="#video-carousel-example2" data-slide-to="1"></li>
      <li data-target="#video-carousel-example2" data-slide-to="2"></li>
      <li data-target="#video-carousel-example2" data-slide-to="3"></li>
    </ol>
    <!--/.Indicators-->
    <!--Slides-->
    <div class="carousel-inner" role="listbox">
      <!-- First slide -->
      <div class="carousel-item active">
        <!--Mask color-->
        <div class="view">
          <!--Video source-->
          <video class="video-fluid" autoplay loop muted>
            <source src="demo/mp4/6293871635.mp4" type="video/mp4" />
          </video>
          <!-- <div class="mask rgba-indigo-light"></div> -->
        </div>

        <!--Caption-->
        <div class="carousel-caption">
          <div class="animated fadeInDown">
            <h3 class="h3-responsive">Out-of-focus Detection</h3>
            <p>See the quality map</p>
          </div>
        </div>
        <!--Caption-->
      </div>
      <!-- /.First slide -->

      <!-- Second slide -->
      <div class="carousel-item">
        <!--Mask color-->
        <div class="view">
          <!--Video source-->
          <video class="video-fluid" autoplay loop muted>
            <source src="demo/mp4/8069880437.mp4" type="video/mp4" />
          </video>
          <!-- <div class="mask rgba-purple-slight"></div> -->
        </div>

        <!--Caption-->
        <div class="carousel-caption">
          <div class="animated fadeInDown">
            <h3 class="h3-responsive">Over/under-exposed Detection</h3>
            <p>See the quality map</p>
          </div>
        </div>
        <!--Caption-->
      </div>
      <!-- /.Second slide -->

      <!-- Third slide -->
      <div class="carousel-item">
        <!--Mask color-->
        <div class="view">
          <!--Video source-->
          <video class="video-fluid" autoplay loop muted>
            <source src="demo/mp4/8440795977.mp4" type="video/mp4" />
          </video>
          <!-- <div class="mask rgba-black-strong"></div> -->
        </div>

        <!--Caption-->
        <div class="carousel-caption">
          <div class="animated fadeInDown">
            <h3 class="h3-responsive">Jitter Detection</h3>
            <p>See the frame quality changes</p>
          </div>
        </div>
        <!--Caption-->
      </div>
      <!-- /.Third slide -->

      <!-- Fourth slide -->
      <div class="carousel-item">
        <!--Mask color-->
        <div class="view">
          <!--Video source-->
          <video class="video-fluid" autoplay loop muted>
            <source src="demo/mp4/12255205254.mp4" type="video/mp4" />
          </video>
          <!-- <div class="mask rgba-black-strong"></div> -->
        </div>

        <!--Caption-->
        <div class="carousel-caption">
          <div class="animated fadeInDown">
            <h3 class="h3-responsive">Jitter Detection - Cont'd</h3>
            <p>frame quality is stable for the beckoning cat video</p>
          </div>
        </div>
        <!--Caption-->
      </div>
      <!-- /.Fourth slide -->


    </div>
    <!--/.Slides-->
    <!--Controls-->
    <a class="carousel-control-prev" href="#video-carousel-example2" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#video-carousel-example2" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
    <!--/.Controls-->
  </div>
  <!--Carousel Wrapper-->
  </div>
</section>
    
      <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="js/include_once.js"></script>
<link href="styles/heatmap.css" rel="stylesheet">
<link href="styles/switch.css" rel="stylesheet">
<style>
.demo_pics{
  height: 50px;
}
</style>
<script>
window.examples = {
  'Picture1':{"global_score":78,"normalized_global_score":84,"local_scores":[[53,52,52,51,51,50,49,51,50,51,53,53,53,50,49,51,53,51,51,56],[53,53,51,49,48,47,48,50,47,50,52,52,52,48,46,48,51,48,51,57],[55,54,52,49,48,46,50,52,47,49,52,53,53,50,47,47,49,47,51,58],[56,56,53,50,49,48,52,54,48,49,53,55,56,55,51,49,48,46,51,58],[57,56,55,53,51,49,50,52,48,50,55,62,63,63,61,59,49,47,52,58],[57,57,56,55,54,49,48,48,46,52,61,66,66,68,66,69,60,52,53,58],[57,57,58,59,60,53,49,46,45,55,64,68,69,71,66,70,67,61,53,58],[59,58,63,67,69,63,58,47,46,57,66,69,70,71,64,67,68,67,53,57],[60,60,67,67,72,71,69,50,48,59,67,69,67,70,64,65,65,68,54,57],[61,62,68,64,70,70,71,54,50,59,67,68,64,68,65,64,63,68,57,57],[60,62,68,64,68,67,70,59,52,55,64,69,64,67,64,64,63,68,63,58],[58,59,68,64,67,66,68,63,52,52,58,68,66,65,62,63,63,65,67,62],[55,55,60,59,63,64,66,64,53,51,56,65,68,66,62,63,61,62,67,66],[53,51,54,59,63,60,64,67,63,54,57,62,67,67,64,63,63,62,63,66],[53,51,53,61,67,62,63,67,70,61,57,59,63,66,64,63,64,64,64,64],[54,53,54,63,69,63,66,68,70,67,58,56,63,67,63,63,63,65,65,64],[55,54,55,63,68,63,67,67,68,69,57,54,63,67,63,62,63,64,66,63],[57,55,57,62,65,64,66,65,65,69,58,54,62,67,63,63,63,65,65,63],[57,56,59,61,64,65,66,65,66,68,60,57,60,66,63,63,63,65,65,64],[56,56,57,58,60,61,62,62,62,63,58,56,56,60,59,60,60,61,62,61]],"normalized_local_scores":[[20,19,18,15,15,14,12,16,13,17,20,20,21,14,10,15,22,15,17,30],[21,21,16,11,9,6,7,14,6,13,20,19,19,9,4,9,16,9,15,32],[26,25,18,11,7,4,12,19,6,11,20,21,22,14,6,7,10,4,15,34],[29,29,21,15,10,8,18,23,7,12,21,27,29,25,16,10,8,3,16,34],[31,31,25,20,16,10,14,19,7,14,26,46,48,49,43,37,11,6,19,35],[31,31,29,27,25,10,8,8,4,19,41,57,57,62,57,65,41,18,21,34],[33,32,34,38,40,22,11,4,0,26,51,61,63,70,57,66,60,43,21,34],[37,36,49,58,64,49,36,7,2,32,56,64,66,70,52,59,60,59,22,33],[41,41,60,60,71,68,65,14,9,38,60,64,59,66,51,53,54,62,25,32],[42,46,61,50,66,66,69,24,14,37,58,62,51,63,53,49,49,62,33,33],[40,45,61,50,61,58,66,36,18,27,50,64,52,57,51,50,49,60,48,36],[34,38,60,50,58,56,62,47,20,18,36,61,57,53,46,49,48,54,60,46],[28,26,40,38,49,49,56,51,22,16,29,52,60,55,45,47,44,45,57,55],[22,15,23,37,47,41,50,58,49,24,31,45,57,58,50,49,48,45,49,56],[22,17,22,41,58,45,47,58,66,43,33,37,47,56,51,48,51,51,50,51],[25,20,23,47,64,47,55,62,67,60,33,30,48,57,49,47,49,52,54,50],[28,23,27,48,60,49,57,58,61,64,32,25,47,58,48,46,48,51,55,49],[31,26,32,46,54,52,55,52,54,63,34,25,44,58,48,48,49,52,54,48],[33,30,37,43,51,53,56,53,55,62,41,31,39,56,49,49,47,52,54,50],[30,28,33,35,41,43,45,44,45,48,35,28,29,41,38,40,40,43,45,43]],"category":"Excellent"},
  'motion0017':{"category":"Good","global_score":71,"local_scores":[[65,68,69,69,69,69,69,69,69,69,69,68,69,68,65,63,61,60,60,59],[65,69,68,68,68,69,68,69,68,68,68,67,67,67,65,63,62,60,60,58],[66,69,69,69,69,69,69,68,68,69,69,68,68,68,67,65,65,64,64,61],[63,66,67,67,66,65,65,65,66,68,69,68,67,67,67,66,66,65,66,63],[60,61,62,63,63,61,60,63,65,66,67,67,66,65,65,64,64,64,65,62],[61,62,64,64,64,61,60,65,67,67,68,68,68,68,66,63,62,63,65,63],[61,63,65,65,63,60,60,65,67,67,68,69,69,68,66,60,57,60,64,62],[60,62,64,65,63,60,60,64,66,66,66,66,67,66,64,59,55,58,63,61],[59,60,63,65,64,61,62,64,67,67,67,67,68,68,65,59,55,58,63,61],[57,57,60,65,65,63,62,63,66,68,68,67,67,67,65,59,56,59,64,61],[57,57,60,64,65,63,61,61,65,66,67,66,64,65,62,58,57,60,64,61],[60,61,63,67,67,64,62,63,66,67,68,66,65,66,65,60,60,63,66,62],[66,68,67,68,67,65,65,66,66,66,67,65,64,67,67,65,66,67,67,62],[66,68,67,66,65,64,65,66,65,65,65,64,64,66,66,65,67,67,66,61],[67,69,67,66,66,67,67,67,67,66,67,67,67,68,69,68,69,69,66,62],[65,67,66,66,67,68,67,68,70,68,68,68,69,69,69,69,69,69,66,62],[63,65,66,66,66,66,66,67,69,68,67,68,69,69,69,69,69,68,66,62],[64,66,67,68,68,67,67,69,70,69,68,69,69,70,69,69,69,69,67,63],[64,66,67,68,69,68,68,68,68,68,68,69,69,69,69,68,68,67,66,63],[63,65,66,66,67,67,66,66,66,66,67,68,68,66,66,66,65,65,64,62]],"normalized_global_score":68,"normalized_local_scores":[[52,61,64,65,64,64,64,64,64,63,64,62,63,62,54,47,44,39,40,37],[54,63,62,62,62,63,62,63,62,61,62,60,58,58,53,47,45,41,41,36],[55,65,65,64,64,65,64,62,60,64,65,62,60,60,58,54,53,49,49,42],[47,56,58,57,57,54,52,53,57,62,64,62,59,58,58,56,55,53,56,48],[39,43,47,49,49,43,41,48,54,57,59,58,55,53,53,51,50,50,54,46],[43,46,50,52,50,43,41,53,59,59,62,62,61,60,56,49,46,47,54,48],[43,48,52,54,48,39,41,53,60,59,61,63,63,61,55,41,33,39,50,44],[41,45,50,53,47,39,41,50,56,55,55,57,58,57,51,37,28,35,48,42],[37,41,48,54,51,44,45,50,58,60,58,59,62,61,55,38,28,35,49,43],[31,32,41,53,54,48,44,47,57,61,60,59,59,59,53,36,29,38,50,43],[31,31,39,51,53,47,41,44,53,57,58,55,52,52,47,35,31,39,50,42],[40,43,48,59,59,50,45,48,56,60,60,57,52,57,53,41,39,47,55,46],[55,60,59,60,58,53,53,55,55,57,58,53,51,58,58,52,55,58,58,46],[56,61,59,56,52,51,54,55,54,52,53,51,51,56,56,54,58,59,55,44],[58,63,60,57,57,59,59,59,59,57,58,58,59,62,63,61,64,63,56,45],[52,57,57,57,58,60,59,62,66,61,60,62,65,65,64,64,65,63,56,46],[48,54,56,56,56,55,55,59,64,60,60,61,63,63,63,63,63,61,56,47],[50,56,59,61,61,59,59,63,66,64,62,63,65,65,65,64,65,63,58,48],[50,56,59,62,63,62,62,61,61,61,62,64,64,63,63,62,61,59,57,49],[47,52,56,57,58,59,57,55,56,57,59,61,60,56,56,56,54,52,52,45]]},
  "NoisyLady": {"category":"Fair","global_score":63,"local_scores":[[52,52,53,53,53,53,52,55,58,59,59,57,55,54,54,53,53,53,55,55],[54,55,56,56,55,54,55,58,59,60,61,60,59,58,58,57,56,56,57,56],[55,57,57,56,56,55,59,61,61,61,61,61,61,61,61,60,58,58,58,56],[55,57,57,56,56,56,60,61,61,60,60,61,61,62,62,60,59,58,58,56],[55,57,56,56,57,58,62,63,62,61,60,60,61,62,62,62,61,60,59,56],[55,57,56,56,58,59,62,63,62,61,60,59,60,61,62,62,62,61,60,56],[56,58,57,57,59,59,60,61,61,60,59,59,60,61,61,61,61,61,61,57],[56,58,58,58,60,59,59,60,59,58,58,59,60,61,60,59,59,60,61,58],[56,58,59,59,60,60,61,60,59,58,58,59,60,62,60,58,57,58,61,58],[56,59,59,60,60,61,61,61,61,61,60,58,60,62,61,58,57,58,60,58],[57,59,59,60,60,59,60,61,62,62,61,58,59,62,62,59,57,57,59,58],[58,60,61,60,60,59,59,61,62,62,61,58,59,61,62,60,58,57,59,58],[59,62,62,61,61,59,57,60,62,61,59,57,57,59,60,61,59,58,58,57],[61,64,64,63,62,60,57,59,60,60,58,56,56,57,60,62,62,59,58,56],[61,65,65,65,64,63,61,60,60,59,57,56,56,58,60,63,63,61,59,57],[60,65,66,65,65,64,64,63,61,59,58,57,58,61,62,63,62,60,59,57],[60,64,65,64,65,64,65,64,62,60,59,59,60,61,62,62,61,58,58,57],[59,63,64,64,64,63,64,62,61,60,59,59,60,61,61,61,60,57,57,56],[59,62,64,63,64,64,64,62,61,60,59,60,61,61,61,61,60,58,58,57],[59,62,63,63,63,63,63,62,61,61,60,61,62,62,61,60,60,59,59,56]],"normalized_global_score":47,"normalized_local_scores":[[19,20,21,22,22,21,18,26,34,39,38,32,27,24,23,22,21,22,26,26],[23,27,29,28,27,24,27,36,38,40,42,40,36,36,34,31,29,29,31,29],[27,33,32,30,29,28,38,43,42,41,43,43,42,44,43,39,36,35,35,29],[28,33,31,29,29,29,40,44,42,41,41,41,42,44,44,41,37,36,35,29],[28,33,30,29,31,33,46,47,45,42,41,41,42,45,46,44,42,40,37,29],[28,33,30,29,35,38,46,48,46,42,39,38,40,44,45,45,44,43,39,30],[29,34,32,32,37,38,40,43,42,39,36,37,40,43,43,42,42,42,42,32],[29,36,35,35,39,38,38,39,36,34,34,36,41,42,39,37,38,39,42,34],[29,36,36,37,40,41,42,41,38,36,35,36,41,44,40,33,33,36,42,34],[31,37,38,39,40,42,43,44,44,43,40,36,39,45,44,35,32,34,40,35],[31,37,38,39,39,38,40,44,45,45,41,34,37,45,45,37,31,31,38,34],[33,41,41,40,40,38,38,43,46,45,41,34,37,43,44,39,34,32,38,34],[37,46,46,43,42,37,32,39,44,43,38,32,33,37,41,42,38,34,34,31],[42,52,51,48,46,41,33,37,41,40,34,30,29,32,39,46,45,38,34,30],[42,54,54,53,51,47,42,39,39,37,33,29,30,34,41,48,47,42,37,32],[40,53,55,53,53,51,51,48,43,37,34,32,35,41,44,47,45,40,38,33],[39,50,53,52,52,52,53,50,45,40,37,36,40,43,44,44,42,35,35,32],[37,47,50,50,49,49,50,46,43,40,37,37,40,42,43,42,40,33,32,31],[37,46,49,49,49,50,50,46,43,40,38,40,43,44,43,42,40,35,34,31],[38,46,47,47,49,48,48,45,43,41,40,42,44,44,43,40,39,37,36,31]]},
  "Picture2": {"category":"Poor","global_score":53,"local_scores":[[53,55,55,56,57,56,55,55,55,54,53,52,52,53,53,54,54,54,54,55],[52,54,54,56,57,56,55,54,54,53,52,51,51,51,52,52,51,51,52,53],[55,57,57,59,59,58,57,56,56,55,51,47,47,49,52,51,47,45,47,52],[56,59,58,60,60,58,57,56,56,54,48,43,42,46,51,49,43,39,42,50],[58,62,60,64,62,59,57,57,56,53,42,35,37,42,50,49,41,37,39,49],[59,62,60,64,63,59,57,56,56,52,38,30,33,39,49,48,40,36,38,48],[60,64,62,66,63,58,57,56,56,50,37,31,33,39,48,49,43,39,41,48],[61,64,62,66,62,58,56,55,55,48,37,32,34,40,48,49,45,43,44,48],[61,67,65,67,62,58,56,55,55,48,39,36,37,41,49,52,48,46,46,49],[62,68,66,69,62,59,58,57,56,50,44,42,42,46,55,58,54,51,51,51],[62,66,65,67,62,60,60,59,58,52,47,45,46,50,58,60,55,53,53,52],[63,68,67,68,64,63,63,61,61,56,51,50,51,55,63,64,58,55,56,55],[62,67,66,67,63,64,63,61,61,58,55,54,55,58,64,65,58,55,58,56],[64,68,67,68,67,68,69,67,68,65,61,61,60,66,69,67,61,58,60,58],[62,65,65,66,66,67,68,67,68,66,63,63,62,67,69,66,61,58,59,57],[63,65,65,67,68,68,69,69,71,70,68,67,65,70,70,67,63,60,60,58],[62,62,62,65,67,67,68,68,70,70,68,67,65,68,69,67,64,61,62,59],[60,60,60,62,64,64,64,64,65,64,63,63,62,64,66,66,63,61,62,59],[60,60,60,62,63,63,63,62,64,63,63,62,61,64,65,65,64,62,62,60],[59,59,59,60,60,59,59,58,58,59,59,60,59,60,61,62,62,61,61,59]],"normalized_global_score":22,"normalized_local_scores":[[21,25,26,30,31,29,28,26,25,24,22,20,20,21,22,23,23,23,25,27],[19,23,24,30,31,29,26,24,24,22,19,16,15,17,18,19,17,16,18,21],[27,33,32,38,37,34,31,29,29,25,16,6,6,11,18,16,5,1,4,18],[30,36,36,41,39,36,32,30,30,24,8,-5,-6,4,15,12,-5,-14,-7,13],[36,44,41,51,46,37,33,31,30,22,-7,-25,-20,-6,13,10,-11,-21,-15,10],[38,46,41,52,47,36,32,30,30,18,-18,-38,-31,-14,9,8,-13,-24,-17,7],[41,52,46,56,49,36,32,30,28,13,-21,-37,-30,-15,9,11,-6,-14,-10,8],[42,51,46,55,46,34,30,28,26,9,-21,-32,-28,-13,8,12,1,-4,-2,9],[44,58,53,60,46,33,30,28,26,9,-15,-23,-20,-9,11,17,8,2,3,11],[46,61,57,63,46,37,35,33,30,13,-2,-7,-6,3,27,34,23,15,16,17],[47,57,53,58,46,40,39,38,35,19,4,1,3,12,35,40,28,20,20,19],[49,61,57,62,52,48,47,43,42,29,16,14,16,26,47,50,34,25,30,27],[46,57,56,58,49,50,48,43,43,35,26,24,26,34,50,52,35,27,34,30],[49,60,59,61,58,62,63,59,61,53,43,42,40,55,63,59,42,33,39,35],[46,54,55,56,56,59,61,59,62,57,48,47,45,59,64,57,42,34,37,33],[49,54,54,59,61,63,65,63,68,67,61,58,54,66,67,59,47,39,40,35],[46,46,46,52,59,59,62,61,66,65,60,58,54,62,64,59,50,44,45,37],[40,41,40,45,49,50,50,50,53,52,48,47,45,51,57,55,49,44,45,38],[40,41,41,45,48,48,47,47,50,49,47,46,43,49,54,54,49,45,46,40],[36,38,38,40,40,39,37,35,36,36,38,39,38,41,43,44,45,42,44,38]]},
  "Picture3":
  {"category":"Fair","global_score":61,"local_scores":[[56,61,62,65,64,60,59,59,60,61,61,60,59,59,60,63,64,63,60,60],[58,63,63,66,65,62,61,61,62,63,63,62,61,61,63,66,68,69,64,64],[58,62,62,64,63,61,61,61,63,64,64,63,62,61,63,66,68,68,65,64],[62,64,63,64,62,61,63,63,65,65,64,64,66,66,67,69,71,71,67,66],[63,64,62,61,58,59,63,63,64,63,62,63,66,66,67,67,70,70,66,66],[66,67,64,62,56,57,62,63,64,62,62,65,68,68,68,68,70,70,67,66],[66,67,63,61,54,55,59,60,61,59,61,64,67,65,66,66,67,67,65,64],[67,67,64,61,53,54,60,61,61,59,61,63,64,63,65,67,68,68,65,65],[64,65,63,59,52,52,58,60,60,57,58,59,58,57,60,64,66,65,64,63],[65,65,62,58,52,54,60,62,61,56,56,56,55,54,59,65,66,65,63,63],[64,64,60,56,51,54,60,61,60,54,53,52,49,48,55,62,62,61,60,60],[65,64,59,57,53,56,62,62,61,54,53,52,50,50,55,63,64,63,62,61],[63,61,57,56,54,57,61,61,60,54,50,50,50,50,54,61,63,62,61,61],[65,63,59,59,58,60,63,62,61,56,53,53,53,54,57,63,66,65,64,63],[64,62,60,60,60,61,62,61,61,57,55,55,56,56,59,63,66,66,64,63],[65,65,63,64,64,65,64,62,62,61,61,62,62,61,62,64,67,66,65,64],[63,64,64,64,64,65,63,62,62,62,63,64,63,62,62,64,65,65,64,64],[63,64,64,64,64,65,63,62,62,63,65,65,63,61,61,63,65,65,64,64],[60,62,61,62,61,62,61,60,61,61,62,63,60,58,59,60,62,63,62,62],[60,62,61,62,61,62,61,60,61,61,62,63,60,58,59,60,62,63,62,62]],"normalized_global_score":43,"normalized_local_scores":[[29,41,45,52,52,40,36,37,40,42,42,41,39,37,40,47,50,48,41,40],[34,47,49,56,54,44,41,42,46,48,48,46,44,41,48,55,62,63,51,50],[35,45,46,51,48,42,42,43,47,49,50,48,45,42,49,55,62,62,52,51],[46,51,49,50,44,42,48,48,53,52,51,51,57,55,60,63,70,70,58,57],[48,50,45,43,34,36,47,47,51,48,46,49,57,56,59,60,66,66,57,55],[56,57,49,45,30,32,46,47,50,45,46,54,62,61,62,61,67,68,59,57],[57,58,48,42,24,25,38,41,42,37,42,51,57,54,56,55,59,60,54,52],[58,59,51,42,22,24,40,43,43,36,42,48,50,48,52,57,61,61,54,52],[51,53,48,38,19,20,35,39,39,32,36,37,34,32,39,51,55,54,50,48],[54,54,46,36,19,23,40,44,42,29,31,30,26,23,36,53,55,52,48,47],[52,50,39,29,16,23,40,44,40,24,20,17,11,9,25,46,46,43,41,41],[54,50,38,31,21,29,44,46,43,24,20,18,14,13,28,48,50,47,44,43],[49,42,32,29,24,31,42,42,39,23,15,13,14,14,25,43,47,46,43,42],[53,47,38,37,34,39,47,46,43,29,22,21,22,23,32,48,55,54,50,48],[51,46,39,41,40,42,45,44,42,32,28,27,30,31,36,47,55,55,50,49],[54,52,48,50,50,52,51,46,45,43,44,45,46,43,46,52,58,57,52,51],[49,51,49,50,50,52,49,44,44,46,48,49,48,44,45,50,53,53,50,50],[48,52,50,51,50,52,49,44,45,48,52,53,48,42,44,48,52,52,50,50],[40,44,43,44,44,45,43,40,42,43,46,47,40,35,37,40,45,47,46,46],[40,44,43,44,44,45,43,40,42,43,46,47,40,35,37,40,45,47,46,46]]},
  "out_of_focus0689":{"category":"Fair","global_score":65,"local_scores":[[63,64,68,69,70,69,67,64,64,64,64,64,64,64,64,64,64,65,65,62],[65,68,70,70,69,69,69,67,65,64,64,64,64,64,64,64,64,64,64,61],[67,70,69,66,65,67,70,70,66,65,64,64,65,65,64,64,65,65,65,61],[68,70,69,67,65,67,68,69,67,65,65,64,65,65,64,64,65,65,65,62],[68,72,72,71,70,69,68,68,66,65,65,65,65,64,64,64,64,65,65,62],[67,73,74,74,74,72,70,68,65,65,64,64,64,64,64,64,64,64,64,61],[63,71,73,73,73,72,70,67,65,64,64,64,64,64,64,64,64,64,64,61],[64,72,75,75,74,73,71,67,65,64,63,64,64,63,64,64,64,64,64,61],[65,71,74,74,72,72,71,69,66,64,63,63,63,62,63,63,64,64,64,61],[67,72,74,72,71,71,71,70,67,66,64,63,62,60,58,57,58,61,63,60],[68,72,73,72,70,67,66,66,66,68,68,65,59,53,51,51,52,56,61,59],[67,70,70,70,67,62,61,62,64,66,67,64,55,46,46,49,50,54,59,58],[62,64,64,64,62,59,59,60,61,62,63,61,50,42,43,48,49,52,57,56],[60,61,61,61,60,58,58,58,58,59,59,57,47,42,43,46,48,50,54,54],[62,62,62,62,60,58,57,57,58,58,58,53,46,43,44,46,47,48,51,52],[63,64,64,62,59,57,55,56,57,57,56,51,45,44,46,48,48,48,49,51],[63,64,63,61,56,54,53,54,55,55,55,51,46,45,47,48,47,47,50,51],[63,63,62,58,54,52,51,52,53,55,56,53,49,47,48,47,46,46,50,50],[62,62,59,56,53,52,52,52,54,57,58,56,52,49,48,46,45,46,50,50],[60,58,56,54,53,52,52,52,53,55,56,55,53,51,50,49,48,48,50,50]],"normalized_global_score":53,"normalized_local_scores":[[47,50,61,64,65,65,58,51,51,51,51,52,52,52,52,51,51,52,53,46],[54,63,66,65,64,65,65,59,52,50,49,50,50,50,50,51,51,51,51,43],[59,65,63,57,54,58,66,66,57,52,51,51,52,52,52,52,52,53,52,43],[60,66,64,58,54,58,62,64,59,54,52,51,53,53,51,51,52,53,53,44],[62,72,73,70,66,63,62,62,56,54,53,53,52,52,51,51,51,52,52,44],[59,74,76,75,75,72,68,61,54,53,52,52,51,51,51,50,50,51,51,43],[49,68,73,74,74,71,66,58,52,51,50,50,50,49,50,50,50,51,51,42],[51,72,78,78,76,74,69,60,52,50,49,49,49,49,50,51,51,52,51,42],[53,70,76,75,73,72,71,65,55,50,47,47,47,46,47,48,49,51,51,41],[59,71,75,72,69,70,70,68,60,55,51,49,44,39,34,32,34,42,49,40],[62,71,74,73,66,60,56,56,57,60,60,54,38,22,16,16,18,30,43,38],[59,65,67,67,59,46,43,46,51,56,58,51,25,3,4,10,13,23,37,34],[46,51,52,51,46,38,37,39,42,46,47,42,13,-7,-3,7,11,18,31,29],[41,43,41,43,40,35,33,34,36,37,37,31,6,-8,-5,3,8,13,23,24],[45,47,45,45,40,34,31,32,34,36,34,20,2,-5,-1,3,6,9,15,19],[48,50,50,46,37,31,27,29,31,33,30,15,0,-2,3,7,8,7,11,16],[48,50,49,42,29,23,20,23,25,27,25,16,4,1,6,9,6,6,12,16],[47,49,45,35,24,18,17,20,23,28,29,23,10,6,7,5,2,4,13,14],[46,44,38,29,23,19,19,20,23,32,36,31,18,10,7,4,1,3,12,14],[39,35,30,25,20,18,18,19,21,27,29,27,20,15,13,11,9,8,12,13]]},
  "motion0114": {"category":"Poor","global_score":54,"local_scores":[[52,52,53,54,55,55,54,54,54,54,53,52,52,53,54,54,54,54,55,55],[51,52,53,53,54,54,53,53,53,52,51,51,51,52,53,54,53,54,55,54],[54,56,56,56,56,56,55,54,54,53,52,51,52,55,56,56,56,56,57,56],[57,59,58,58,57,56,55,55,55,55,54,52,54,57,58,58,57,58,58,56],[57,59,59,58,57,56,55,55,56,57,56,54,55,57,58,58,58,58,58,56],[57,60,59,58,57,56,56,56,60,63,62,60,59,59,59,58,57,58,58,56],[57,60,60,59,57,55,56,60,65,67,67,67,67,64,60,56,55,57,58,56],[56,59,59,58,56,54,55,60,64,65,65,66,67,65,59,54,53,56,58,56],[56,59,59,57,54,53,55,63,68,67,64,65,66,64,58,53,52,55,58,56],[54,55,54,51,49,50,56,67,70,64,58,57,57,56,54,52,51,54,57,55],[53,52,50,47,46,49,56,66,68,61,56,54,53,52,52,52,51,54,56,55],[52,51,48,46,46,50,57,65,67,61,56,54,53,52,52,51,52,54,56,55],[51,50,47,46,49,53,56,59,59,57,54,52,50,49,49,48,50,53,55,54],[52,50,47,47,50,54,54,55,56,54,52,51,48,48,47,46,49,52,54,54],[52,51,48,48,51,53,54,54,55,53,51,48,46,47,46,46,49,52,53,53],[54,52,50,50,51,52,52,52,52,50,47,45,45,47,47,48,50,52,53,53],[54,53,51,51,51,50,50,51,50,48,45,45,47,48,49,50,50,52,53,52],[56,56,54,53,52,51,51,51,51,49,46,47,49,51,52,52,52,52,53,53],[59,60,59,56,53,52,51,51,50,48,47,48,52,54,54,54,53,53,54,54],[59,60,60,56,53,51,50,51,50,48,47,49,52,53,53,53,52,53,54,54]],"normalized_global_score":25,"normalized_local_scores":[[19,20,22,25,26,25,25,24,24,23,20,19,20,21,23,24,24,24,27,26],[17,19,21,22,23,23,22,21,21,20,17,15,16,19,22,23,22,23,26,24],[25,29,29,30,30,29,26,25,24,22,19,16,18,26,30,30,29,30,32,29],[31,37,36,34,32,30,27,26,27,27,24,20,23,31,35,35,33,34,35,30],[32,38,37,34,32,30,28,26,29,32,30,24,26,33,36,35,34,34,36,30],[32,39,39,35,32,29,29,30,39,47,45,39,38,38,37,35,33,34,36,30],[31,40,40,37,31,27,29,39,53,58,58,59,58,52,39,29,26,31,35,30],[29,38,39,35,29,24,28,40,51,54,53,57,59,53,37,24,21,29,34,29],[29,37,37,32,24,21,27,49,61,58,50,54,57,50,35,21,17,27,34,29],[24,26,23,15,9,13,30,58,65,50,35,33,33,29,24,18,16,25,32,28],[20,20,14,5,2,10,29,56,60,43,30,25,22,19,19,18,17,24,30,26],[18,16,9,2,4,13,31,54,58,43,30,25,21,18,18,17,17,24,28,26],[17,13,5,2,10,20,29,36,39,31,24,19,12,11,10,8,13,21,25,24],[17,14,7,5,14,23,25,26,29,24,19,15,8,7,5,3,10,18,23,23],[20,16,8,8,16,22,23,24,26,22,16,8,3,4,2,2,10,18,22,22],[23,19,13,13,16,18,18,17,18,13,6,1,1,5,5,8,13,18,21,20],[25,21,16,15,15,15,15,15,14,9,1,0,4,8,11,14,15,18,20,20],[29,28,25,21,18,17,17,17,16,10,3,4,11,15,18,18,18,20,22,20],[37,40,38,29,21,18,16,15,14,8,4,9,18,23,24,23,21,21,25,23],[38,41,39,29,21,17,15,15,13,7,4,10,17,22,22,20,20,20,24,23]]},
  "i07_08_5":
  {"category":"Bad","global_score":49,"local_scores":[[51,51,51,52,52,51,51,51,51,50,49,51,52,53,53,52,52,53,54,55],[50,49,50,51,50,50,50,50,50,48,48,49,50,51,50,50,51,51,52,53],[51,51,52,52,50,50,51,52,52,50,49,50,51,51,51,51,52,52,52,53],[52,51,52,52,50,49,51,52,52,51,49,49,50,51,51,51,52,52,53,53],[53,52,52,52,50,50,53,55,55,53,50,50,50,51,51,52,53,53,53,53],[54,52,52,52,50,51,54,55,56,54,51,50,50,51,51,53,55,55,55,54],[54,53,52,52,51,51,53,54,55,53,51,50,50,51,51,53,55,55,55,54],[54,52,52,52,51,50,52,53,53,52,50,50,50,50,51,53,55,55,55,55],[54,52,52,52,51,49,50,51,51,50,49,50,50,50,51,53,54,54,55,55],[54,52,52,52,51,49,50,50,50,49,49,49,50,50,51,53,54,54,55,55],[54,53,53,53,51,49,49,49,49,49,48,49,49,49,50,52,53,52,53,54],[54,53,54,54,52,50,49,50,50,49,48,48,49,49,50,51,52,52,52,53],[54,54,54,54,52,50,50,51,51,50,48,48,49,49,50,51,52,52,53,53],[54,54,54,54,53,51,51,52,52,50,48,48,48,49,50,52,53,53,53,54],[54,54,54,54,53,51,52,53,53,51,49,48,48,49,50,52,53,54,54,54],[54,54,54,54,53,52,53,53,53,53,50,48,47,49,51,52,54,54,54,54],[54,54,54,54,53,53,53,53,53,53,50,48,47,48,50,51,53,53,53,53],[54,55,54,54,53,53,53,53,53,53,51,49,48,49,51,51,53,53,54,54],[54,54,54,54,53,52,52,52,52,52,51,49,48,49,51,51,52,52,53,53],[54,55,54,54,54,54,53,53,53,53,52,51,50,50,52,52,53,53,53,53]],"normalized_global_score":11,"normalized_local_scores":[[17,15,17,19,19,17,17,17,15,12,12,16,19,20,20,19,20,21,24,26],[13,12,14,15,14,12,13,14,13,8,7,11,14,15,14,13,15,16,18,22],[17,16,17,18,15,13,16,18,17,13,10,12,15,16,16,16,18,17,19,22],[18,16,18,17,13,12,17,19,19,15,11,12,14,15,15,17,19,18,20,22],[20,18,19,18,14,13,22,26,27,20,12,12,14,15,16,19,22,21,22,22],[23,20,19,18,14,15,24,28,29,23,15,13,14,15,17,22,25,25,25,24],[24,20,19,18,15,16,23,25,25,22,17,14,14,15,17,22,26,27,27,25],[23,20,19,18,15,14,19,21,22,19,14,14,14,15,17,22,26,27,28,26],[23,19,18,18,15,12,15,16,17,14,12,13,14,14,16,21,25,25,27,27],[23,20,20,20,15,11,13,14,14,12,10,12,12,13,15,20,24,23,25,26],[23,22,23,22,17,11,11,12,12,10,8,10,11,12,14,18,20,20,22,24],[24,23,23,23,18,13,12,12,12,10,9,9,10,11,14,16,18,18,19,22],[24,23,24,24,20,15,14,15,15,12,9,9,9,11,14,17,19,20,21,23],[24,23,24,24,20,15,16,18,18,14,9,9,9,10,14,17,20,21,22,23],[25,23,24,24,21,17,18,20,20,17,10,8,7,10,15,18,22,24,25,24],[25,24,24,24,22,20,21,22,22,20,13,8,7,10,15,18,23,24,25,24],[23,24,23,23,22,20,21,21,22,21,14,7,5,9,14,16,20,21,22,22],[25,25,24,24,22,21,21,20,21,21,15,9,7,10,15,17,20,21,23,23],[24,24,23,23,21,20,19,18,19,19,15,11,9,11,15,17,19,19,21,22],[25,26,25,25,23,23,22,22,22,22,19,15,13,14,17,19,21,20,22,22]]},
  "i07_08_4": {"category":"Fair","global_score":60,"local_scores":[[55,56,57,58,58,57,56,56,55,55,54,55,55,56,57,57,57,57,57,56],[54,55,56,57,57,56,55,54,54,53,53,54,54,54,55,55,56,56,56,55],[57,58,58,59,59,58,57,56,56,56,56,56,56,56,57,58,58,58,57,56],[58,59,59,59,59,59,58,57,57,57,57,57,56,56,57,59,59,58,58,56],[58,59,59,60,60,59,60,59,60,59,58,58,57,58,58,60,61,60,59,56],[58,59,59,59,59,59,61,61,62,60,58,58,58,59,59,60,62,61,61,57],[57,58,58,58,57,58,60,60,61,60,57,57,58,59,59,59,61,61,61,57],[57,58,58,58,57,57,59,59,60,59,57,58,58,59,59,60,61,62,61,58],[57,57,57,57,56,55,56,57,58,57,56,57,58,58,59,59,60,60,61,58],[58,59,59,58,57,56,57,58,58,57,56,57,58,58,58,59,60,60,61,58],[60,61,61,61,60,59,59,59,59,57,55,56,56,57,57,58,59,59,61,59],[60,61,61,61,61,60,60,60,59,57,55,55,55,56,56,57,58,59,60,59],[60,61,61,62,62,62,62,61,61,58,56,56,55,56,56,57,58,60,61,59],[59,60,60,61,62,62,62,61,60,58,56,55,55,55,55,56,58,59,60,58],[58,59,60,60,61,61,61,61,60,59,56,55,54,55,55,57,59,60,60,58],[57,58,58,59,59,59,59,59,59,59,57,54,53,54,55,58,59,60,60,57],[56,57,57,57,58,58,58,58,58,58,56,54,52,53,55,58,59,59,59,56],[56,58,57,57,57,58,58,57,58,58,57,55,53,54,56,58,59,59,59,57],[56,57,57,57,57,57,57,56,57,58,57,55,53,54,56,58,58,57,58,56],[56,57,57,57,57,57,57,56,57,57,57,55,54,54,56,57,57,57,57,56]],"normalized_global_score":41,"normalized_local_scores":[[26,29,31,34,34,31,29,28,28,25,24,26,28,29,31,31,31,31,32,30],[24,27,29,31,31,29,27,25,24,22,22,23,24,25,26,27,28,28,29,27],[31,34,36,37,37,36,33,29,29,28,29,30,29,29,31,34,36,33,33,28],[34,36,37,38,38,37,34,31,31,31,32,32,31,30,32,36,38,36,35,28],[36,38,38,39,39,38,40,37,40,38,35,34,33,34,35,40,43,39,37,30],[36,37,36,38,36,36,42,42,45,41,34,34,35,36,37,41,44,43,42,32],[33,34,34,35,33,33,39,39,42,39,32,33,35,36,36,38,43,44,42,32],[33,34,34,35,32,31,36,37,40,37,32,34,35,37,37,39,43,44,44,34],[32,32,33,32,29,27,30,31,34,32,30,33,34,35,36,36,39,41,42,34],[35,36,36,36,31,29,33,34,35,32,29,32,33,34,35,37,41,40,42,35],[39,42,42,42,39,37,38,38,37,31,28,29,30,31,32,35,38,38,41,36],[41,44,43,44,42,40,41,39,38,32,27,28,28,29,30,31,35,37,41,36],[40,43,43,45,46,45,45,42,41,35,29,28,28,29,30,31,36,39,41,37],[38,40,41,43,45,45,45,42,41,35,29,27,26,27,28,29,35,38,40,35],[36,38,39,41,43,43,44,41,41,36,30,26,24,26,27,31,37,39,41,35],[31,34,34,36,37,38,38,38,38,36,31,25,21,24,28,34,38,39,40,33],[28,33,32,33,33,34,35,35,35,35,31,24,19,22,27,33,37,37,37,30],[30,33,33,33,33,34,34,33,34,35,32,25,21,23,30,35,37,36,37,31],[29,32,32,32,31,31,31,30,32,34,32,26,22,24,29,34,35,33,35,30],[28,32,31,31,31,31,31,31,32,33,31,26,23,24,28,32,33,31,32,29]]}

};
window.obj = window.examples["Picture1"];
$(document).ready(function(){ // alert(this.src)
  $('.demo_pics').click(function() {
    document.querySelector('#imraw').src = this.src;
    var name = this.src.replace(/^.*[\\\/]/, '').replace(/\.[^/.]+$/, "");
    console.log(name);
    window.obj = window.examples[name];
    update_qmap();
  });
});
</script>
<section class="text-center py-5" id="online-demo">
  <div>
    <div class="container my-5">
      <div class="wow fadeInUp">
        <h2 class="h1 h1-responsive text-center my-5">DEMO</h2>
        <!-- Try it online :) -->
        <p class="lead blue-grey-text text-center w-responsive mx-auto mb-5">
          Powered by <a href="https://cloud.google.com/appengine">Google App Engine</a>
        </p>
      </div>



      <div class="row">
        <!-- Filepond stylesheet -->
<link href="https://unpkg.com/filepond/dist/filepond.min.css" rel="stylesheet">

<div class="doublecolumn" style="text-align:center;">
  <!-- max-width: 50%; -->
  <br/>
  <img id='imraw' src='demo/Picture1.jpg' style="width:100%;border: 3px solid black" />
  <br/>
  <br/>
  <div style="white-space:nowrap; ">
    <!-- overflow-x: scroll -->
    Click â–º
    <img class='demo_pics' src="demo/Picture2.png">
    <img class='demo_pics' src="demo/out_of_focus0689.jpg">
    <img class='demo_pics' src="demo/motion0114.jpg">
    <img class='demo_pics' src="demo/Picture1.jpg">
    <img class='demo_pics' src="demo/i07_08_5.bmp">
    <img class='demo_pics' src="demo/i07_08_4.bmp">
    <!-- <img class='demo_pics' src="demo/Picture3.jpg"> -->
    <!-- <img class='demo_pics' src="demo/NoisyLady.png"> -->
  </div>
  <br/>
  <input type="file"
       class="filepond"
       name="filepond"
       style="height: 500" id='filepond' />
  <!-- <div class="alert alert-primary" role="alert">
    Step 1: upload your file:
  </div> -->
</div>
<script src="https://unpkg.com/filepond/dist/filepond.min.js"></script>
<!--
<link href="filepond/filepond.min.css" rel="stylesheet">
<script src="filepond/filepond.min.js"></script> -->
<script type="text/javascript">
// https://pqina.nl/filepond/docs/patterns/getting-started/
// const pond = FilePond.create(); // document.querySelector('.filepond');
// FilePond.setOptions();
const pond = FilePond.create(
  document.querySelector('#filepond'),
  {
      maxFiles: 1,
      server: {
          // url: 'http://localhost:8080',
          // url: 'https://10.157.89.130',
          // https gives ERR_CONNECTION_REFUSED
          url: 'https://paq2piq.appspot.com',
          process: {
              url: '/filepond',
              method: 'POST',
              withCredentials: false,
              crossDomain: true,
              headers: {},
              timeout: 7000,
              onload: (response) => {
                 console.log(response);
                 window.obj = JSON.parse(response);
                 update_qmap();
              },
              onerror: null,
              ondata: null,
          }
      },
  }
);
pond.onaddfile = function (error, file) {
    console.log('File added', file);
    if (error) {
        console.log('Oh no');
        return;
    }
    f = window.URL.createObjectURL(pond.getFile().file)
    //console.log(pond.getFile().file)
    //console.log(f)
    img = document.querySelector('#imraw')
    img.src = f
    // image might contain white padding...
    console.log({
      width:img.width, height:img.height,
      clientWidth:img.clientWidth, clientHeight:img.clientHeight,
      naturalWidth:img.naturalWidth, naturalHeight:img.naturalHeight,
       // realWidth:pic_real_width, realHeight:pic_real_height,
      height:(img.naturalHeight) * img.clientWidth/img.naturalWidth})
  }
// FilePond.parse(document.body);
// pond.onaddfile(
//   function (error, file) {
//     console.log('File added', file);
//     if (error) {
//         console.log('Oh no');
//         return;
//     }
//     f = window.URL.createObjectURL(pond.getFile().file)
//     //console.log(pond.getFile().file)
//     //console.log(f)
//     document.querySelector('#imraw').src = f
//   }
// )

//
// inputElement.addEventListener('FilePond:addfile', e => {
//   console.log('File added', e.detail);
//   if (error) {
//       console.log('Oh no');
//       return;
//   }
//   console.log('File added', file);
//   f = window.URL.createObjectURL(pond.getFile().file)
//   //console.log(pond.getFile().file)
//   //console.log(f)
//   document.querySelector('#imraw').src = f
//   // $('btn_im_only').trigger('mouseenter');
// });
//
//
// // update image after uploading
// document.addEventListener('FilePond:loaded', e => {
//     console.log('FilePond ready for use', e.detail);
//     const inputElement = document.querySelector('#filepond');
//     // pond.on('addfile', (error, file) => { //API change!!!
//     // });
//
// });
</script>
        <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="js/include_once.js"></script>
<script src="js/plotly-latest.min.js"></script>
<style>
#image-with-heatmap{
  margin-left: auto;
  margin-right: auto;
  left: 0px;
  top: 0px;
  position: relative;
  background-color:transparent !important;
  text-decoration:none solid rgb(0, 0, 0) !important;
}
#heatmap{
  align-content:normal;align-items:normal;align-self:auto;alignment-baseline:auto;animation-delay:0s;animation-direction:normal;animation-duration:0s;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;appearance:none;backdrop-filter:none;backface-visibility:visible;background-attachment:scroll;background-blend-mode:normal;background-clip:border-box;background-color:rgba(0, 0, 0, 0);background-image:none;background-origin:padding-box;background-position:0% 0%;background-repeat:repeat;background-size:auto;baseline-shift:0px;block-size:809px;border-block-end-color:rgb(0, 0, 0);border-block-end-style:none;border-block-end-width:0px;border-block-start-color:rgb(0, 0, 0);border-block-start-style:none;border-block-start-width:0px;border-bottom-color:rgb(0, 0, 0);border-bottom-left-radius:0px;border-bottom-right-radius:0px;border-bottom-style:none;border-bottom-width:0px;border-collapse:separate;border-image-outset:0;border-image-repeat:stretch;border-image-slice:100%;border-image-source:none;border-image-width:1;border-inline-end-color:rgb(0, 0, 0);border-inline-end-style:none;border-inline-end-width:0px;border-inline-start-color:rgb(0, 0, 0);border-inline-start-style:none;border-inline-start-width:0px;border-left-color:rgb(0, 0, 0);border-left-style:none;border-left-width:0px;border-right-color:rgb(0, 0, 0);border-right-style:none;border-right-width:0px;border-top-color:rgb(0, 0, 0);border-top-left-radius:0px;border-top-right-radius:0px;border-top-style:none;border-top-width:0px;bottom:0px;box-shadow:none;box-sizing:content-box;break-after:auto;break-before:auto;break-inside:auto;buffered-rendering:auto;caption-side:top;caret-color:rgb(0, 0, 0);clear:none;clip:auto;clip-path:none;clip-rule:nonzero;color:rgb(0, 0, 0);color-interpolation:srgb;color-interpolation-filters:linearrgb;color-rendering:auto;column-count:auto;column-gap:normal;column-rule-color:rgb(0, 0, 0);column-rule-style:none;column-rule-width:0px;column-span:none;column-width:auto;content:normal;cursor:auto;cx:0px;cy:0px;d:none;direction:ltr;display:block;dominant-baseline:auto;empty-cells:show;fill:rgb(0, 0, 0);fill-opacity:1;fill-rule:nonzero;filter:none;flex-basis:auto;flex-direction:row;flex-grow:0;flex-shrink:1;flex-wrap:nowrap;float:none;flood-color:rgb(0, 0, 0);flood-opacity:1;font-family:"Times New Roman";font-kerning:auto;font-optical-sizing:auto;font-size:16px;font-stretch:100%;font-style:normal;font-variant:normal;font-variant-caps:normal;font-variant-east-asian:normal;font-variant-ligatures:normal;font-variant-numeric:normal;font-weight:400;grid-auto-columns:auto;grid-auto-flow:row;grid-auto-rows:auto;grid-column-end:auto;grid-column-start:auto;grid-row-end:auto;grid-row-start:auto;grid-template-areas:none;grid-template-columns:none;grid-template-rows:none;height:809px;hyphens:manual;image-orientation:from-image;image-rendering:auto;inline-size:1176px;isolation:auto;justify-content:normal;justify-items:normal;justify-self:auto;left:0px;letter-spacing:normal;lighting-color:rgb(255, 255, 255);line-break:auto;line-height:normal;list-style-image:none;list-style-position:outside;list-style-type:disc;margin-block-end:0px;margin-block-start:0px;margin-bottom:0px;margin-inline-end:0px;margin-inline-start:0px;margin-left:0px;margin-right:0px;margin-top:0px;marker-end:none;marker-mid:none;marker-start:none;mask-type:luminance;max-block-size:none;max-height:none;max-inline-size:none;max-width:none;min-block-size:0px;min-height:0px;min-inline-size:0px;min-width:0px;mix-blend-mode:normal;object-fit:fill;object-position:50% 50%;offset-distance:0px;offset-path:none;offset-rotate:auto 0deg;opacity:1;order:0;orphans:2;outline-color:rgb(0, 0, 0);outline-offset:0px;outline-style:none;outline-width:0px;overflow-anchor:auto;overflow-wrap:normal;overflow-x:visible;overflow-y:visible;overscroll-behavior-block:auto;overscroll-behavior-inline:auto;padding-block-end:0px;padding-block-start:0px;padding-bottom:0px;padding-inline-end:0px;padding-inline-start:0px;padding-left:0px;padding-right:0px;padding-top:0px;paint-order:normal;perspective:none;perspective-origin:588px 404.5px;pointer-events:auto;position:relative;r:0px;resize:none;right:0px;row-gap:normal;ruby-position:over;rx:auto;ry:auto;scroll-behavior:auto;scroll-margin-block-end:0px;scroll-margin-block-start:0px;scroll-margin-inline-end:0px;scroll-margin-inline-start:0px;scroll-padding-block-end:auto;scroll-padding-block-start:auto;scroll-padding-inline-end:auto;scroll-padding-inline-start:auto;shape-image-threshold:0;shape-margin:0px;shape-outside:none;shape-rendering:auto;speak:normal;stop-color:rgb(0, 0, 0);stop-opacity:1;stroke:none;stroke-dasharray:none;stroke-dashoffset:0px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-width:1px;tab-size:8;table-layout:auto;text-align:start;text-align-last:auto;text-anchor:start;text-decoration:none solid rgb(0, 0, 0);text-decoration-color:rgb(0, 0, 0);text-decoration-line:none;text-decoration-skip-ink:auto;text-decoration-style:solid;text-indent:0px;text-overflow:clip;text-rendering:auto;text-shadow:none;text-size-adjust:auto;text-transform:none;text-underline-position:auto;top:0px;touch-action:auto;transform:none;transform-origin:588px 404.5px;transform-style:flat;transition-delay:0s;transition-duration:0s;transition-property:all;transition-timing-function:ease;unicode-bidi:normal;user-select:auto;vector-effect:none;vertical-align:baseline;visibility:visible;white-space:normal;widows:2;width:1176px;will-change:auto;word-break:normal;word-spacing:0px;writing-mode:horizontal-tb;x:0px;y:0px;z-index:auto;zoom:1;-webkit-app-region:none;-webkit-border-horizontal-spacing:0px;-webkit-border-image:none;-webkit-border-vertical-spacing:0px;-webkit-box-align:stretch;-webkit-box-decoration-break:slice;-webkit-box-direction:normal;-webkit-box-flex:0;-webkit-box-ordinal-group:1;-webkit-box-orient:horizontal;-webkit-box-pack:start;-webkit-box-reflect:none;-webkit-font-smoothing:auto;-webkit-highlight:none;-webkit-hyphenate-character:auto;-webkit-line-break:auto;-webkit-line-clamp:none;-webkit-locale:auto;-webkit-mask-box-image:none;-webkit-mask-box-image-outset:0;-webkit-mask-box-image-repeat:stretch;-webkit-mask-box-image-slice:0 fill;-webkit-mask-box-image-source:none;-webkit-mask-box-image-width:auto;-webkit-mask-clip:border-box;-webkit-mask-composite:source-over;-webkit-mask-image:none;-webkit-mask-origin:border-box;-webkit-mask-position:0% 0%;-webkit-mask-repeat:repeat;-webkit-mask-size:auto;-webkit-print-color-adjust:economy;-webkit-rtl-ordering:logical;-webkit-tap-highlight-color:rgba(0, 0, 0, 0.18);-webkit-text-combine:none;-webkit-text-decorations-in-effect:none;-webkit-text-emphasis-color:rgb(0, 0, 0);-webkit-text-emphasis-position:over right;-webkit-text-emphasis-style:none;-webkit-text-fill-color:rgb(0, 0, 0);-webkit-text-orientation:vertical-right;-webkit-text-security:none;-webkit-text-stroke-color:rgb(0, 0, 0);-webkit-text-stroke-width:0px;-webkit-user-drag:auto;-webkit-user-modify:read-only;-webkit-writing-mode:horizontal-tb;
}
#heatmap1{
  left: 0px;
  top: 0px;
  position: absolute;
  /*position: relative; this will make the heatmap non-interactive*/
  /*z-index: -1;*/
  z-index: 998;
  mix-blend-mode: screen !important;
  /* overlay; */
}
#imtest {
  position: absolute;
  left: 0px;
  top: 25px;
  z-index: 997;
  opacity: 0.2;
}
/* this is important */
#heatmap-ctrl{
  z-index: 999;
}
</style>
<div class="doublecolumn">
  <div id='image-with-heatmap' >
    <div id="heatmap"></div>
    <img id='imtest' src='demo/Picture1.jpg' style="width:100%;outline: 3px solid black" />
  </div>
  <br/>
  <div class="btn-group" id='heatmap-ctrl' role="group" aria-label="Basic example">
    <button type="button" class="btn btn-sm btn-secondary" id='btn_im_only'
      data-toggle="tooltip" title="Show image only" >
      Image</button>
    <button type="button" class="btn btn-sm btn-secondary active" id='btn_im_map'
     data-toggle="tooltip" title="Show both image and heatmap" >
      Both</button>
    <button type="button" class="btn btn-sm btn-secondary" id='btn_map_only'
      data-toggle="tooltip" title="Show heatmap only" >
      Heatmap</button>
  </div>

  <br/>
  <br/>

  <div id="textbox">
    <p style="float: left;padding-left: 50px">Poor quaility</p>
    <p style="float: right;padding-right: 50px">High quality</p>
    <div style="clear: both;"></div>
  </div>

  <!-- credit:
  http://juliagraphics.github.io/Colors.jl/stable/colormaps/
  https://www.browserling.com/tools/reverse-lines -->
  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="70%" height="4mm" viewBox="0 0 32 1" preserveAspectRatio="none" shape-rendering="crispEdges" stroke="none" style="width: 70%; height: 11.1667px;">
   <rect width="32" height="1" x=" 0" y="0" fill="#082C59"></rect>
   <rect width="31" height="1" x=" 1" y="0" fill="#143F77"></rect>
   <rect width="30" height="1" x=" 2" y="0" fill="#1F5392"></rect>
   <rect width="29" height="1" x=" 3" y="0" fill="#2B65A9"></rect>
   <rect width="28" height="1" x=" 4" y="0" fill="#3777BC"></rect>
   <rect width="27" height="1" x=" 5" y="0" fill="#4588CC"></rect>
   <rect width="26" height="1" x=" 6" y="0" fill="#5598D8"></rect>
   <rect width="25" height="1" x=" 7" y="0" fill="#65A7E1"></rect>
   <rect width="24" height="1" x=" 8" y="0" fill="#76B4E8"></rect>
   <rect width="23" height="1" x=" 9" y="0" fill="#87C0ED"></rect>
   <rect width="22" height="1" x="10" y="0" fill="#98CBF1"></rect>
   <rect width="21" height="1" x="11" y="0" fill="#A9D5F4"></rect>
   <rect width="20" height="1" x="12" y="0" fill="#B9DEF7"></rect>
   <rect width="19" height="1" x="13" y="0" fill="#C8E6F9"></rect>
   <rect width="18" height="1" x="14" y="0" fill="#D7EEFB"></rect>
   <rect width="17" height="1" x="15" y="0" fill="#E5F4FD"></rect>
   <rect width="16" height="1" x="16" y="0" fill="#FFECE7"></rect>
   <rect width="15" height="1" x="17" y="0" fill="#FFE2DA"></rect>
   <rect width="14" height="1" x="18" y="0" fill="#FFD6CC"></rect>
   <rect width="13" height="1" x="19" y="0" fill="#FFCABD"></rect>
   <rect width="12" height="1" x="20" y="0" fill="#FFBCAD"></rect>
   <rect width="11" height="1" x="21" y="0" fill="#FFAE9D"></rect>
   <rect width="10" height="1" x="22" y="0" fill="#FF9E8C"></rect>
   <rect width=" 9" height="1" x="23" y="0" fill="#FF8D7B"></rect>
   <rect width=" 8" height="1" x="24" y="0" fill="#FB7B6A"></rect>
   <rect width=" 7" height="1" x="25" y="0" fill="#F16858"></rect>
   <rect width=" 6" height="1" x="26" y="0" fill="#E35546"></rect>
   <rect width=" 5" height="1" x="27" y="0" fill="#D14136"></rect>
   <rect width=" 4" height="1" x="28" y="0" fill="#BB2E26"></rect>
   <rect width=" 3" height="1" x="29" y="0" fill="#A11C18"></rect>
   <rect width=" 2" height="1" x="30" y="0" fill="#820C0A"></rect>
   <rect width=" 1" height="1" x="31" y="0" fill="#610102"></rect>
  </svg>

  <div class="progress" style="display: inline-block; height: 20px; width: 70%" >
    <div id='score' class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
  </div>

</div>
<script>
function dumpCSSText(element){
  var s = '';
  var o = getComputedStyle(element);
  for(var i = 0; i < o.length; i++){
    s+=o[i] + ':' + o.getPropertyValue(o[i])+';';
  }
  return s;
}
function dbg() {
  dumpCSSText($('#image-with-heatmap'))
}
function get_image_resolution(selector) {
  // https://stackoverflow.com/questions/318630/get-the-real-width-and-height-of-an-image-with-javascript-in-safari-chrome
  var img = $(selector)[0]; // Get my img elem
  return {
    width:img.width, height:img.height,
    clientWidth:img.clientWidth, clientHeight:img.clientHeight,
    naturalWidth:img.naturalWidth, naturalHeight:img.naturalHeight,
     // realWidth:pic_real_width, realHeight:pic_real_height,
    height2:(img.naturalHeight) * img.clientWidth/img.naturalWidth}
}
function show_obj() {
  var top_margin = 25;
  if (window.obj == undefined) return;
// https://stackoverflow.com/questions/318630/get-the-real-width-and-height-of-an-image-with-javascript-in-safari-chrome
// imtest
// var img = $('#imtest')[0]; //$('#imtest')[0]; // Get my img elem
//  width = img.clientWidth// display size
//  height = top_margin + (img.clientHeight) // (img.naturalHeight) * width/img.naturalWidth;

// width = 1000; //img.width
// height = top_margin + 500; //img.height

// width = 600; //img.width
// height = top_margin + 400;

// $("<img/>") // Make in memory copy of image to avoid css issues
//     .attr("src", $(img).attr("src"))
//     .load(function() {
//         width = this.width;   // Note: $(this).width() will not
//         height = this.height; // work for in memory images.
//     });
// console.log(width)
// console.log(height)
document.querySelector('#imtest').src = document.querySelector('#imraw').src;
// $('#imtest').fadeTo(1000, 0.2);
// $('#heatmap').fadeTo(1000, 0);
sz = get_image_resolution('#imraw'); //('#imtest');
height = sz.clientHeight+TOP_MARGIN;
// height = sz.naturalHeight+TOP_MARGIN
width = sz.clientWidth;
// width = sz.naturalWidth
$('#image-with-heatmap').height(height);
$('#image-with-heatmap').width(width);
 // mat = obj.normalized_local_scores.
//  for(var i = 0; i < mat.length; i++) {
//     for(var j = 0; j < mat[i].length; j++) {
//          mat[i][j] = Math.pow(mat[i][j]/100, 2)*100;
//     }
// }
 // https://stackoverflow.com/questions/30610523/reverse-array-in-javascript-without-mutating-original-array
 var data = [
   {
     z: window.obj.normalized_local_scores.slice().reverse(),
     type: 'heatmap',
     // opacity: 0.8,
     showscale: false
   }
 ];

  if(!do_stretch()){
    data[0]['zmin'] = 0; //40
    data[0]['zmax'] = 100;
  }

  var layout = {
    // https://stackoverflow.com/questions/29968152/python-setting-background-color-to-transparent-in-plotly-plots
    paper_bgcolor: 'rgba(0,0,0,0)',
    plot_bgcolor: 'rgba(0,0,0,0)',

    height: height,
    width: width,
    autosize: false, //true,
    // hovermode: false, // important
    margin: {
      l: 0,
      r: 0,
      b: 0,
      t: top_margin, // tooltip bar
      pad: 0
    },
    xaxis: {
      fixedrange: true, // disable zoom https://plotly.com/javascript/disable-zoom/
      showgrid: false,
      zeroline: false,
      showline: false,
      ticks: '',
      showticklabels: false
    },
    yaxis: {
      fixedrange: true, // disable zoom
      showgrid: false,
      zeroline: false,
      showline: false,
      ticks: '',
      showticklabels: false
    },
  };
  Plotly.newPlot('heatmap', data, layout);
}
$(document).ready(function(){
  // bootstrap button group active
  // https://jsfiddle.net/Behseini/NsQ2a/
  $(".btn-group > .btn").hover(function(){
      $(".btn-group > .btn").removeClass("active");
      $(this).addClass("active");
  });
  show_obj();
  var trigger_mode = isMobile.any()? 'click':'hover';
  on_update_qmap(show_obj);
  // https://stackoverflow.com/questions/3326078/jquery-call-function-from-a-string
  $('#btn_im_only')[trigger_mode](function(){ $('#imtest').css('opacity', '1'); $('#heatmap').css('opacity', '0');  }); // $('#imtest').fadeTo(1, 1);
  $('#btn_im_map')[trigger_mode](function(){ $('#heatmap').css('opacity', '0.8'); $('#imtest').css('opacity', '0.2')  }); // $('#imtest').fadeTo(1000, 0.2);
  $('#btn_map_only')[trigger_mode](function(){ $('#heatmap').css('opacity', '1'); $('#imtest').css('opacity', '0') });
  $('#btn_im_map').trigger( trigger_mode ); // trigger once to show the fused map
  if(window.obj != undefined) {
    $('.demo_pics')[0].click();
  }
})
</script>
        <!-- <div class="justify-content-center py-5"><a href="#"> <img class="img-fluid py-2" src="img/google-play.png" alt="google play logo"/></a><a href="#"> <img class="img-fluid py-2" src="img/app-store.png" alt="app store logo"/></a></div> -->
      </div>

      <br/>

      <div class="row" >
        <div class="column">
          <div class="alert alert-primary" role="alert">
            Predicted Quality
            <br/><br/>
            <h3 id="h1_score"></h3>
          </div>
        </div>
        <div class="column">
          <div class="alert alert-light advancedcfg" role="alert">
            <p data-toggle="tooltip"  title="Use relative values to better view the heatmap"> Contrast Stretch </p>
            <!-- Rounded switch -->
            <label class="switch">
              <input type="checkbox" id='check_contrast_stretch'>
              <!-- checked -->
              <span class="slider round"></span>
            </label>
            <!-- <span >?</span> -->
          </div>
        </div>
        <script>
function update_hist() {
    if (window.obj == undefined) return; // otherwise this function will not be called after encountering error
    var hist_data = [
      {
        x: [].concat(...window.obj.normalized_local_scores.slice()),
        type: 'histogram',
    	  histnorm: 'probability',
    	  marker: {
            color: 'rgb(0,0,100)',
         },
      }
    ];

    var hist_layout = {
      height: 100,
      width: 400,
      autosize: true,
      margin: {
        l: 25,
        r: 25,
        b: 20,
        t: 0, // tooltip bar
        pad: 0
      },
    };

    // https://plot.ly/javascript/axes/
    if(!do_stretch()){
      hist_layout['xaxis'] = {range: [0, 100]}
    }
    Plotly.newPlot('qualityHist', hist_data, hist_layout);
    // $('#btn_im_map').trigger('mouseenter');
    // $('#btn_im_map').trigger("click"); // mobile


    // alert(obj.global);
    // $('#score').text(obj.result);

    // score = Math.pow(obj.result/100, 2)*100;
    score = window.obj.normalized_global_score;
    $('#score').width(score+'%').attr('aria-valuenow', score+'%');
    // Predicted Quality Score: ' +
    $('#score').text(score);
    $('#h1_score').text(window.obj.category);
    // to do, support multiple files
   // https://plot.ly/javascript/colorscales/
   //$('#imtest').height()  document.querySelector('#imtest').height
   //
}

$(document).ready(function(){
  // $("#imgUploaded").hover(hide_image, show_image);
  // $('#heatmap').css('opacity', '0.8'); $('#imtest').css('opacity', '0.2')
  $('#check_contrast_stretch').change(update_qmap);
  update_hist();
  on_update_qmap(update_hist);
  // $('#check_contrast_stretch').prop( "checked", true );
});
</script>

<div class="doublecolumn advancedcfg">

  <div class="alert alert-light" role="alert">
    Local score histogram and global score

    <br/>
    <div align="center" id='qualityHist' style="width:100%; height: 80px"></div>
  <br/>
</div>
</div>
      </div>
    </div>
  </div>
</section>
<script src="js/plotly-latest.min.js"></script>
    
      <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="js/include_once.js"></script>

<section class="text-center py-5 grey lighten-2" id="download-zone">
  <div class="container">
    <div class="wow fadeInUp">
      <h2 class="h1 pt-5 pb-3">DOWNLOAD</h2>
      <p class="px-5 mb-5 pb-3 lead">
        Please submit an issue <a href='https://github.com/baidut/PaQ-2-PiQ/issues'>here</a> if you encounter any difficulties.
      </p>
    </div>
    <div class="row wow zoomIn">
      <div class="col-lg-4 col-md-12 mb-r">
        <div class="card card-image">
          <div class="text-white text-center pricing-card d-flex align-items-center rgba-stylish-strong py-3 px-3 rounded">
            <div class="card-body">
              <div class="h5">Database</div>
              <!-- <div class="py-5"><sup class="display-4">$</sup><span class="display-1">9</span><span class="display-4">/m</span></div> -->
              <div class="py-5"><span class="display-1"><i class="fa fa-database"></i></span></div>
              <ul class="list-unstyled">
                <li>
                  <p><strong>4 M</strong> ratings</p>
                </li>
                <li>
                  <p><strong>8 k</strong> subjects</p>
                </li>
                <li>
                  <p><strong>40 k</strong> images</p>
                </li>
                <li>
                  <p><strong>120 k</strong> patches</p>
                </li>
              </ul><a class="btn btn-outline-white mt-5" href='https://github.com/niu-haoran/FLIVE_Database/blob/master/database_prep.ipynb
'> Download</a>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-4 col-md-12 mb-r">
        <div class="card card-image">
          <div class="text-white text-center pricing-card d-flex align-items-center rgba-red-strong py-3 px-3 rounded">
            <div class="card-body">
              <div class="h5">Code</div>
              <div class="py-5"><span class="display-1"><i class="fa fa-code"></i></span></div>
              <ul class="list-unstyled">
                <li>
                  <p>Pretrained Models</p>
                </li>
                <li>
                  <p>Reproducible Results</p>
                </li>
                <li>
                  <p>Training/Testing Utils</p>
                </li>
                <li>
                  <p><a href="https://colab.research.google.com/github/baidut/PaQ-2-PiQ/blob/master/demo.ipynb" target="_parent"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open Demo In Colab"/></a></p>
                </li>
              </ul><a class="btn btn-outline-white mt-5" href='https://github.com/baidut/PaQ-2-PiQ'> Download</a>
            </div>
          </div>
        </div>
      </div>

      <div class="col-lg-4 col-md-12 mb-r">
        <div class="card card-image">
          <div class="text-white text-center pricing-card d-flex align-items-center rgba-teal-strong py-3 px-3 rounded">
            <div class="card-body">
              <div class="h5">Paper</div>
              <div class="py-5"><span class="display-1"><i class="fa fa-file"></i></span></div>
              <ul class="list-unstyled">
                <li>
                  <p>Available on ArXiv</p>
                </li>
                <li>
                  <p>Accepted to CVPR 2020</p>
                </li>
                <li>
                  <p>
                    <a href='http://cvpr2020.thecvf.com/'><img style="width:260px" src="imgs/CVPR_Logo_Horz2_web.jpg" />
                  </a></p>
                </li>
                <!-- <li>
                  <p><strong>100GB</strong> citation</p>
                </li> -->
              </ul>
              <a class="btn btn-outline-white mt-5" href='https://arxiv.org/pdf/1912.10088.pdf'> Download</a>
            </div>
          </div>
        </div>
      </div>


    </div>
  </div>
</section>
    
      <section class="text-center py-5" id="links">
  <div>
    <div class="container my-5">
      <div class="wow fadeInUp">
        <h2 class="h1 h1-responsive text-center my-5">LINKS</h2>
        <!-- Try it online :) -->
        <!-- <p class="lead blue-grey-text text-center w-responsive mx-auto mb-5">
          Powered by <a href="https://cloud.google.com/appengine">Google App Engine</a>
        </p> -->

        <p class=&quot;px-5 mb-5 pb-3 lead&quot;>References</p> <ol type = &quot;1&quot; align=left>
<li>D. Ghadiyaram and A. C. Bovik. Massive online crowdsourced study of subjective and objective picture quality. IEEE Transactions on Image Processing, vol. 25, no. 1, pp. 372-387, Jan 2016. 2, 3, 4, 5, 8, 12</li>
<li>Z. Ying, M. Mandal, D. Ghadiyaram, and A. Bovik, â€œPatchVQ:â€™patching upâ€™the video quality problem,â€ arXiv preprint arXiv:2011.13544, 2020.</li>
<li>D. Ghadiyaram and A. C. Bovik. Perceptual quality prediction on authentically distorted images using a bag of features approach. Journal of Vision, vol. 17, no. 1, art. 32, pp. 1-25, January 2017. 2</li>
<li>H. R. Sheikh, M. F. Sabir, and A. C. Bovik. A statistical evaluation of recent full reference image quality assessment algorithms. IEEE Transactions on Image Processing, vol. 15, no. 11, pp. 3440-3451, Nov 2006. 2, 3, 4</li>
<li>H. Lin, V. Hosu, and D. Saupe. Koniq-10K: Towards an ecologically valid and large-scale IQA database. arXiv preprint arXiv:1803.08489, March 2018. 2, 3, 4, 5, 8, 12</li>
</ol>

        <a href="https://live.ece.utexas.edu/index.php">
          <img src="https://live.ece.utexas.edu/img/live_logo.png" style="width:50%">
        </a>
        <a href="https://ai.facebook.com/" target="" data-ms="{&quot;creative&quot;:&quot;link&quot;,&quot;creative_detail&quot;:&quot;link&quot;,&quot;create_type&quot;:&quot;link&quot;,&quot;create_type_detail&quot;:&quot;link&quot;}">
          <img src="FacebookAI.png" style="width:50%">
          <!-- <img src="https://scontent.fftw1-1.fna.fbcdn.net/v/t39.2365-6/50432943_2218533565135064_1121196750149779456_n.svg?_nc_cat=111&amp;_nc_sid=ad8a9d&amp;_nc_oc=AQn36cynBcAzgxHXTbBrghiszKlfvfbm9IwchC-Gd0vbz443AlyWE5cSm1Dkv0nXmlM&amp;_nc_ht=scontent.fftw1-1.fna&amp;oh=668d5b45c29a836daaa8d149ad1bbc4a&amp;oe=5E957CF4" alt=""> -->
          <!-- <img src="https://scontent.fftw1-1.fna.fbcdn.net/v/t39.2365-6/50351503_343545779812728_5923712031009013760_n.svg?_nc_cat=107&amp;_nc_sid=ad8a9d&amp;_nc_oc=AQlyEW0Te8MLnJIc46vNydEbHDCiAKE6gxk-EvMt6qQjox01rjFzG2eep4JQ9rzvyxU&amp;_nc_ht=scontent.fftw1-1.fna&amp;oh=7a0057608aaf663523cdbda75e73c6e6&amp;oe=5E953DEB" alt=""> -->
        </a>

      </div>

      <div class="row">
        <div class="column" style="text-align:center">
        </div>
        <div class="column" style="text-align:center">

        </div>
      </div>

    </div>
  </div>
</section>


</div>
    <footer class="page-footer special-color-dark text-white center-on-small-only pt-0 mt-0">
      <!-- <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="mb-5 flex-center">
              <a class="px-3"><i class="fa fa-facebook fa-lg white-text"></i></a>
              <a class="px-3"><i class="fa fa-twitter fa-lg white-text"></i></a>
              <a class="px-3"><i class="fa fa-google-plus fa-lg white-text"></i></a>
              <a class="px-3"><i class="fa fa-linkedin fa-lg white-text"></i></a></div>
          </div>
        </div>
      </div> -->
      <div class="footer-copyright">
        <div class="container-fluid text-center">
          <br/>
          <p>&copy; <a href="https://live.ece.utexas.edu/" target="_blank">Laboratory for Image & Video Engineering</a> - Design: <a href="https://templateflip.com/" target="_blank">TemplateFlip</a></p>
        </div>
      </div>
    </footer>
    <script>new WOW().init();</script>
  </body>
</html>
    
    